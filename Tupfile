include_rules

include deps/foundation/deps.tup
LIBS = $(FOUNDATION_LIBS)
include suffix.tup

preload code/src
preload code/src/butane
preload code/src/butane/application
preload code/src/butane/graphics
preload code/src/butane/math
preload code/src/butane/platforms
preload code/src/butane/resource
preload code/src/butane/resources
preload code/src/butane/script
preload code/src/butane/tasks

OBJS = code/src/*.o code/src/*.res
OBJS += code/src/butane/*.o
OBJS += code/src/butane/application/*.o
OBJS += code/src/butane/graphics/*.o
OBJS += code/src/butane/math/*.o
OBJS += code/src/butane/platforms/*.o
OBJS += code/src/butane/resource/*.o
OBJS += code/src/butane/resources/*.o
OBJS += code/src/butane/script/*.o
OBJS += code/src/butane/tasks/*.o

ifeq (@(TUP_PLATFORM),win32)
preload code/src/butane/platforms/windows
OBJS += code/src/butane/platforms/windows/*.o
ifeq (@(RENDERER),d3d11)
preload code/src/butane/graphics/d3d11
OBJS += code/src/butane/graphics/d3d11/*.o
LIBS += dxgi.lib d3d11.lib d3dcompiler.lib
endif
endif

OBJS += deps/foundation/foundation$(LIB_SUFFIX)$(LIB_EXT)
OBJS += deps/lua/lua52$(LIB_SUFFIX)$(LIB_EXT)

: $(OBJS) |> !exe |> butane$(SUFFIX)$(EXE_EXT)
